
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>AI Coworker Blueprint‚Ñ¢ | Nimbology</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&family=Fraunces:opsz,wght@9..144,600;9..144,700&display=swap" rel="stylesheet">
  <style>
    :root {
      --navy: #0e2029;
      --navy-light: #1e3a4c;
      --teal: #0d9488;
      --teal-light: #14b8a6;
      --coral: #db4227;
      --coral-dark: #c13820;
      --blue: #3b82f6;
      --blue-dark: #2563eb;
      --gold: #f59e0b;
      --green: #22c55e;
      --red: #dc2626;
      --gray-50: #f9fafb;
      --gray-100: #f3f4f6;
      --gray-200: #e5e7eb;
      --gray-300: #d1d5db;
      --gray-400: #9ca3af;
      --gray-500: #6b7280;
      --gray-600: #4b5563;
      --gray-700: #374151;
      --gray-900: #111827;
      --bg-main: #f0f7f7;
      --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
      --shadow-lg: 0 8px 30px rgba(0,0,0,0.12);
      --radius-sm: 6px;
      --radius-md: 10px;
      --radius-lg: 16px;
      --radius-full: 9999px;
    }
    
    * { box-sizing:border-box; }
    
    body { 
      margin:0; 
      padding:0; 
      background: var(--bg-main); 
      font-family: 'DM Sans', system-ui, sans-serif;
      color: var(--gray-900);
      line-height: 1.6;
    }
    
    #app {
      max-width: 600px;
      margin: 1.5rem auto;
      background: #fff;
      border-radius: var(--radius-lg);
      overflow: hidden;
      box-shadow: var(--shadow-lg);
    }

    /* ========== HEADER ========== */
    #header { 
      background: linear-gradient(135deg, var(--navy) 0%, var(--navy-light) 100%);
      padding: 1.5rem;
      text-align: center;
    }
    #header img { 
      max-width: 160px;
      height: auto;
      margin-bottom: 0.5rem;
    }
    #header h1 { 
      margin: 0;
      color: #fff; 
      font-family: 'Fraunces', serif;
      font-size: 1.5rem;
      font-weight: 600;
      letter-spacing: -0.02em;
    }
    
    /* ========== PROGRESS BAR ========== */
    .progress { 
      height: 4px; 
      background: var(--gray-200); 
      width: 100%; 
    }
    .progress-bar { 
      height: 4px; 
      background: linear-gradient(90deg, var(--teal) 0%, var(--blue) 100%);
      width: 0%; 
      transition: width 0.4s ease; 
    }
    
    /* ========== FORM CONTAINER ========== */
    #formContainer { 
      padding: 1.75rem 1.5rem; 
      min-height: 300px;
    }
    
    .question { 
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .question h2 { 
      color: var(--navy);
      font-family: 'Fraunces', serif;
      font-size: 1.4rem;
      font-weight: 600;
      margin: 0 0 0.75rem 0;
      letter-spacing: -0.02em;
    }
    
    .question p { 
      line-height: 1.7; 
      color: var(--gray-600);
      margin: 0 0 1rem 0;
    }
    
    .question label { 
      display: block; 
      margin-bottom: 0.75rem; 
      font-weight: 600; 
      color: var(--navy);
      font-size: 1.05rem;
      line-height: 1.5;
    }
    
    /* ========== CHARACTER BUDGET BAR ========== */
    .char-budget {
      background: var(--gray-100);
      border-radius: var(--radius-md);
      padding: 0.75rem 1rem;
      margin-bottom: 1rem;
    }
    .char-budget-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    .char-budget-label {
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--gray-500);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    .char-budget-count {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--gray-700);
    }
    .char-budget-count.warning {
      color: var(--gold);
    }
    .char-budget-count.over {
      color: var(--red);
    }
    .char-budget-bar-bg {
      height: 8px;
      background: var(--gray-200);
      border-radius: var(--radius-full);
      overflow: hidden;
    }
    .char-budget-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--teal) 0%, var(--blue) 100%);
      border-radius: var(--radius-full);
      transition: width 0.3s ease, background 0.3s ease;
    }
    .char-budget-bar-fill.warning {
      background: linear-gradient(90deg, var(--gold) 0%, #fbbf24 100%);
    }
    .char-budget-bar-fill.over {
      background: linear-gradient(90deg, var(--red) 0%, #ef4444 100%);
    }
    .char-budget-message {
      font-size: 0.8rem;
      margin-top: 0.5rem;
      padding: 0.5rem 0.75rem;
      border-radius: var(--radius-sm);
      display: none;
    }
    .char-budget-message.warning {
      display: block;
      background: #fef3c7;
      color: #92400e;
    }
    .char-budget-message.over {
      display: block;
      background: #fee2e2;
      color: #991b1b;
    }
    
    /* ========== PREFIX DISPLAY ========== */
    .prefix-display { 
      background: linear-gradient(135deg, var(--gray-50) 0%, #fff 100%);
      padding: 0.75rem 1rem; 
      border-radius: var(--radius-sm);
      margin-bottom: 0.75rem; 
      font-style: italic; 
      color: var(--gray-600);
      border-left: 3px solid var(--teal);
      font-size: 0.95rem;
    }
    
    /* ========== FORM INPUTS ========== */
    input[type=text], input[type=email], textarea {
      width: 100%; 
      padding: 0.85rem 1rem; 
      font-size: 1rem; 
      font-family: inherit;
      border: 2px solid var(--gray-200); 
      border-radius: var(--radius-md);
      transition: border-color 0.2s, box-shadow 0.2s;
      background: #fff;
    }
    input[type=text]:focus, input[type=email]:focus, textarea:focus {
      outline: none;
      border-color: var(--teal);
      box-shadow: 0 0 0 4px rgba(13, 148, 136, 0.1);
    }
    textarea { 
      resize: vertical; 
      min-height: 120px; 
      line-height: 1.6;
    }
    textarea::placeholder {
      color: var(--gray-400);
    }
    
    /* ========== TAG SELECTOR ========== */
    .tag-selector {
      margin-bottom: 1rem;
    }
    .tag-helper {
      font-size: 0.85rem;
      color: var(--gray-500);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .tag-helper::before {
      content: "üí°";
      font-size: 1rem;
    }
    .tag-category {
      margin-bottom: 1rem;
    }
    .tag-category-label {
      font-size: 0.75rem;
      color: var(--gray-500);
      margin-bottom: 0.5rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    .tag-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    .tag-chip {
      padding: 0.45rem 0.9rem;
      background: #fff;
      border: 2px solid var(--gray-200);
      border-radius: var(--radius-full);
      font-size: 0.875rem;
      color: var(--gray-700);
      cursor: pointer;
      transition: all 0.15s ease;
      user-select: none;
      font-weight: 500;
    }
    .tag-chip:hover {
      border-color: var(--teal);
      background: rgba(13, 148, 136, 0.05);
      transform: translateY(-1px);
    }
    .tag-chip.selected {
      background: var(--teal);
      border-color: var(--teal);
      color: #fff;
    }
    .tag-chip.selected:hover {
      background: var(--teal-light);
      border-color: var(--teal-light);
    }
    .clear-tags {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      margin-top: 0.75rem;
      font-size: 0.85rem;
      color: var(--gray-500);
      cursor: pointer;
      text-decoration: none;
      transition: color 0.2s;
      font-weight: 500;
    }
    .clear-tags:hover {
      color: var(--red);
    }
    
    /* ========== CONTROLS ========== */
    .controls { 
      display: flex; 
      justify-content: space-between; 
      padding: 1rem 1.5rem; 
      background: var(--gray-50);
      border-top: 1px solid var(--gray-200);
    }
    
    button {
      padding: 0.75rem 1.75rem; 
      font-size: 1rem; 
      font-weight: 600;
      font-family: inherit;
      border: none; 
      border-radius: var(--radius-md); 
      cursor: pointer;
      background: var(--coral); 
      color: #fff;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }
    button:hover:not([disabled]) {
      background: var(--coral-dark);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(219, 66, 39, 0.3);
    }
    button[disabled] { 
      background: var(--gray-300); 
      cursor: not-allowed; 
      transform: none;
      box-shadow: none;
    }
    
    #prevBtn {
      background: #fff;
      color: var(--gray-600);
      border: 2px solid var(--gray-300);
    }
    #prevBtn:hover:not([disabled]) {
      background: var(--gray-50);
      border-color: var(--gray-400);
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }
    
    /* ========== COPY BUTTONS ========== */
    .copy-btn { 
      margin-top: 0.75rem;
      background: var(--navy);
      width: 100%;
      justify-content: center;
    }
    .copy-btn:hover {
      background: var(--navy-light);
      box-shadow: 0 4px 12px rgba(14, 32, 41, 0.3);
    }
    
    /* ========== SUMMARY BOX ========== */
    .summary { 
      background: var(--gray-50); 
      padding: 1rem; 
      border: 2px solid var(--gray-200); 
      border-radius: var(--radius-md); 
      white-space: pre-wrap; 
      font-size: 0.9rem;
      line-height: 1.6;
      color: var(--gray-700);
      max-height: 180px;
      overflow-y: auto;
    }
    
    /* ========== FOOTER ========== */
    #footer {
      background: var(--navy);
      color: rgba(255,255,255,0.8);
      text-align: center;
      padding: 1.25rem 1.5rem;
      font-size: 0.8rem;
      line-height: 1.7;
    }
    #footer a { 
      color: var(--teal-light); 
      text-decoration: none;
    }
    #footer a:hover {
      text-decoration: underline;
    }
    
    /* ========== TOAST ========== */
    #toast {
      position: fixed;
      top: 1.5rem;
      left: 50%;
      transform: translateX(-50%) translateY(-20px);
      background: #fff;
      color: var(--gray-900);
      padding: 1rem 1.5rem;
      border-radius: var(--radius-md);
      display: none;
      font-size: 0.95rem;
      font-weight: 600;
      box-shadow: var(--shadow-lg);
      z-index: 9999;
      border-left: 4px solid var(--green);
      animation: slideDown 0.3s ease forwards;
    }
    @keyframes slideDown {
      to { transform: translateX(-50%) translateY(0); }
    }

    /* ========== PLATFORM TABS ========== */
    .platform-tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }
    .tab-btn {
      padding: 0.6rem 1.25rem;
      background: #fff;
      border: 2px solid var(--gray-200);
      border-radius: var(--radius-md);
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 600;
      font-family: inherit;
      color: var(--gray-600);
      transition: all 0.2s;
    }
    .tab-btn:hover {
      border-color: var(--teal);
      color: var(--teal);
    }
    .tab-btn.active {
      background: var(--teal);
      border-color: var(--teal);
      color: white;
    }
    
    .platform-instructions {
      background: var(--gray-50);
      padding: 1rem 1.25rem;
      border-radius: var(--radius-md);
      margin-bottom: 1.25rem;
      border-left: 4px solid var(--teal);
    }
    .platform-instructions p {
      margin: 0 0 0.5rem 0;
      font-weight: 700;
      color: var(--navy);
    }
    .platform-instructions ul {
      margin: 0;
      padding-left: 1.25rem;
    }
    .platform-instructions li {
      margin-bottom: 0.35rem;
      color: var(--gray-600);
    }

    /* ========== RESULT HEADERS ========== */
    .result-section-header {
      display: flex;
      align-items: center;
      margin: 1.75rem 0 0.75rem 0;
    }
    .result-section-header h3 {
      margin: 0;
      color: var(--navy);
      font-family: 'Fraunces', serif;
      font-weight: 600;
    }
    .section-number {
      background: linear-gradient(135deg, var(--teal) 0%, var(--blue) 100%);
      color: white;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.9rem;
      margin-right: 0.75rem;
    }

    /* ========== EMAIL SECTION ========== */
    .email-section-top {
      background: linear-gradient(135deg, var(--coral) 0%, var(--coral-dark) 100%);
      padding: 1.5rem;
      border-radius: var(--radius-md);
      margin-bottom: 1.75rem;
    }
    .email-section-top h3 {
      color: #fff;
      margin: 0 0 0.75rem 0;
      font-family: 'Fraunces', serif;
      font-size: 1.2rem;
      font-weight: 600;
    }
    .email-section-top .warning {
      background: rgba(255,255,255,0.15);
      padding: 0.85rem 1rem;
      border-radius: var(--radius-sm);
      margin-bottom: 1rem;
      font-size: 0.9rem;
      color: #fff;
      line-height: 1.5;
    }
    .email-input-row {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }
    .email-input-row input[type="email"] {
      flex: 1;
      min-width: 200px;
      padding: 0.85rem 1rem;
      border: none;
      border-radius: var(--radius-md);
    }
    .email-input-row button {
      background: #fff;
      color: var(--coral);
      font-weight: 700;
      padding: 0.85rem 1.5rem;
    }
    .email-input-row button:hover {
      background: var(--gray-100);
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }
    .email-alt {
      margin-top: 0.85rem;
      text-align: center;
    }
    .email-alt a {
      color: rgba(255,255,255,0.9);
      font-size: 0.9rem;
      cursor: pointer;
      text-decoration: underline;
      font-weight: 500;
    }
    .email-alt a:hover {
      color: #fff;
    }

    /* ========== CELEBRATION ========== */
    .celebration {
      text-align: center;
      margin-bottom: 1.75rem;
    }
    .celebration h2 {
      color: var(--navy);
      font-family: 'Fraunces', serif;
      font-size: 2rem;
      font-weight: 700;
      margin: 0 0 0.5rem 0;
      letter-spacing: -0.02em;
    }
    .celebration p {
      color: var(--gray-600);
      font-size: 1.1rem;
      margin: 0;
    }

    /* ========== NEXT STEPS ========== */
    .next-steps {
      background: #fff;
      padding: 1.5rem;
      border-radius: var(--radius-md);
      margin-top: 1.75rem;
      border: 2px solid var(--gray-200);
    }
    .next-steps h3 {
      color: var(--navy);
      margin: 0 0 1.25rem 0;
      font-family: 'Fraunces', serif;
      font-size: 1.15rem;
      font-weight: 600;
    }
    .next-step-item {
      display: flex;
      align-items: flex-start;
      margin-bottom: 1.25rem;
      padding-bottom: 1.25rem;
      border-bottom: 1px solid var(--gray-200);
    }
    .next-step-item:last-child {
      margin-bottom: 0;
      padding-bottom: 0;
      border-bottom: none;
    }
    .next-step-icon {
      width: 44px;
      height: 44px;
      background: linear-gradient(135deg, var(--teal) 0%, var(--blue) 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 1rem;
      flex-shrink: 0;
      font-size: 1.25rem;
    }
    .next-step-content h4 {
      margin: 0 0 0.35rem 0;
      color: var(--navy);
      font-size: 1rem;
      font-weight: 600;
    }
    .next-step-content p {
      margin: 0;
      color: var(--gray-500);
      font-size: 0.9rem;
      line-height: 1.5;
    }
    .next-step-content a {
      color: var(--teal);
      text-decoration: none;
      font-weight: 600;
    }
    .next-step-content a:hover {
      text-decoration: underline;
    }

    /* ========== INTRO SCREENS ========== */
    .intro-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }
    .intro-list {
      text-align: left;
      max-width: 400px;
      margin: 1rem auto;
    }
    .intro-list li {
      margin-bottom: 0.5rem;
      color: var(--gray-600);
    }
  </style>
</head>
<body>
  <div id="app">
    <div id="header">
      <img src="https://images.squarespace-cdn.com/content/672bffc68fd9b922d9f34a55/08a58d80-4436-4c37-a3b6-e3bb7e086c45/Strategic+Advisory+%282%29.png?content-type=image%2Fpng"
           alt="Nimbology logo"/>
      <h1>AI Coworker Blueprint‚Ñ¢</h1>
    </div>
    <div class="progress"><div class="progress-bar" id="progressBar"></div></div>
    <div id="formContainer"></div>
    <div class="controls">
      <button id="prevBtn" disabled>‚Üê Back</button>
      <button id="nextBtn">Next ‚Üí</button>
    </div>
    <div id="footer">
      <div>
        Built with privacy in mind. No data stored. No third-party access.<br>
        Your information stays yours‚Äîalways.<br><br>
        Questions? <a href="https://nimbology.com/contact">nimbology.com/contact</a>
      </div>
    </div>
  </div>

  <div id="toast"></div>

  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

<script>
// ==== CONFIGURE EmailJS ====
const EMAILJS_USER_ID    = 'SFReYwwY4dQJsG2ap';
const EMAILJS_SERVICE_ID = 'service_gpqnffd';
const EMAILJS_TEMPLATE_ID= 'template_roe9gvx';
emailjs.init(EMAILJS_USER_ID);

// ==== CONSTANTS ====
const CHAR_LIMIT = 1500;
const WARNING_THRESHOLD = 0.8; // 80%

// ==== TAG OPTIONS FOR ALL QUESTIONS ====
const tagOptions = {
  aiName: {
    "Popular Choices": ["Javi", "Max", "Sage", "Atlas", "Quinn", "Nova", "Aria", "Echo", "Kai", "Robin"]
  },
  
  aiTraits: {
    "Communication Style": ["Direct", "No BS", "Clear", "Concise", "Warm", "Professional", "Conversational", "Formal"],
    "Intelligence & Approach": ["Strategic", "Analytical", "Creative", "Practical", "Big-picture", "Detail-oriented", "Resourceful", "Thorough"],
    "Personality": ["High EQ", "Sharp", "Fun", "Witty", "Patient", "Encouraging", "Challenging", "Motivational"],
    "Expertise Level": ["Executive-level", "Coach-like", "Mentor-like", "Peer-like", "Expert", "Generalist"]
  },
  
  aiDont: {
    "Communication": ["Flatter me", "Be a yes-person", "Overcomplicate things", "Be vague", "Hedge when I need clarity", "Use jargon", "Be condescending"],
    "Behavior": ["Use emojis", "Be trite", "Give generic advice", "Assume I know less than I do", "Repeat yourself", "Over-explain basics"],
    "Approach": ["Avoid hard truths", "Sugarcoat feedback", "Be passive", "Give long-winded answers", "Miss the point", "Ignore context"]
  },
  
  workGoals: {
    "Leadership": ["Lead my team well", "Get promoted", "Build influence", "Develop my people", "Run better meetings", "Make confident decisions"],
    "Performance": ["Hit revenue targets", "Ship projects on time", "Improve efficiency", "Exceed expectations", "Deliver results", "Meet deadlines"],
    "Focus & Energy": ["Protect my focus", "Manage my time better", "Reduce stress", "Work smarter", "Prioritize ruthlessly", "Set boundaries"]
  },
  
  aspirations: {
    "Financial": ["Financial freedom", "Build wealth", "Increase income", "Create passive income", "Retire early", "Buy investment properties"],
    "Career & Impact": ["Start a business", "Write a book", "Build a personal brand", "Become a thought leader", "Make a bigger impact", "Change careers"],
    "Lifestyle": ["More time with family", "Location independence", "Better work-life balance", "Travel more", "Health & fitness", "Learn new skills"]
  },
  
  opinions: {
    "Feedback Style": ["Challenge my thinking", "Give me your honest opinions", "Play devil's advocate", "Push back when I'm wrong", "Be direct with feedback"],
    "Perspective": ["Help me see blind spots", "Show me other perspectives", "Question my assumptions", "Point out risks", "Identify what I'm missing"]
  },
  
  values: {
    "Core Values": ["Integrity", "Excellence", "Honesty", "Authenticity", "Accountability", "Transparency"],
    "Relational Values": ["Generosity", "Empathy", "Respect", "Kindness", "Loyalty", "Trust"],
    "Achievement Values": ["Growth", "Innovation", "Impact", "Quality", "Efficiency", "Results"],
    "Guiding Principles": ["Truth over comfort", "People over profit", "Long-term over short-term", "Substance over style", "Action over perfection"]
  },
  
  coaching: {
    "Leadership": ["Executive presence", "Leadership", "Decision-making", "Delegation", "Influence", "Managing up"],
    "Communication": ["Confident communication", "Persuasion", "Negotiation", "Public speaking", "Difficult conversations", "Storytelling"],
    "Strategy": ["Strategic thinking", "Financial thinking", "Business acumen", "Problem-solving", "Critical thinking", "Prioritization"],
    "Personal": ["Emotional intelligence", "Self-awareness", "Resilience", "Confidence", "Presence", "Energy management"]
  },
  
  prepareFor: {
    "People": ["Critics and detractors", "Difficult stakeholders", "Office politics", "Saboteurs", "Skeptics", "Naysayers"],
    "Situations": ["Hard conversations", "High-stakes meetings", "Negotiations", "Presentations", "Interviews", "Conflict"],
    "Opportunities": ["Opportunities I might miss", "Career pivots", "Leadership roles", "Speaking opportunities", "Partnerships", "Growth moments"]
  },
  
  encouragement: {
    "Confidence": ["I'm capable of this", "I've done hard things before", "Trust my instincts", "I belong here", "I'm enough"],
    "Focus": ["Stay focused on what matters", "Progress over perfection", "One thing at a time", "Trust the process", "Keep going"],
    "Celebration": ["Celebrate small wins", "Acknowledge progress", "Give myself credit", "Rest is productive", "I'm further than I think"]
  },
  
  overcome: {
    "Productivity": ["Procrastination", "Overthinking", "Analysis paralysis", "Perfectionism", "Distraction", "Time-wasting"],
    "Boundaries": ["People-pleasing", "Saying yes too often", "Overcommitting", "Taking on too much", "Not delegating", "Fear of conflict"],
    "Mindset": ["Self-doubt", "Imposter syndrome", "Negative self-talk", "Fear of failure", "Playing small", "Comparison"]
  },
  
  workStyle: {
    "Quality": ["World-class", "Excellent", "High-quality", "Polished", "Professional", "Refined"],
    "Character": ["Original", "Creative", "Distinctive", "Bold", "Fresh", "Innovative"],
    "Approach": ["Clear", "Sharp", "Efficient", "Practical", "Actionable", "Results-focused"],
    "Philosophy": ["Substance over flash", "Done is better than perfect", "Built to last", "Simple but powerful", "Less but better"]
  },
  
  becomeWhat: {
    "Leadership": ["A better leader", "A confident executive", "An inspiring manager", "A trusted advisor", "A decisive leader"],
    "Impact": ["Someone who creates real impact", "A force for good", "An industry leader", "A thought leader", "A changemaker"],
    "Personal": ["The best version of myself", "More confident", "More effective", "More balanced", "Financially free", "Fulfilled"]
  },

  yourName: {
    "Formats": ["[First name]", "[Nickname]", "Dr. [Last name]", "Coach", "Boss", "[Title + Name]"]
  },
  
  roles: {
    "Leadership": ["Founder", "CEO", "Executive", "Director", "Manager", "Team Lead", "Supervisor"],
    "Professional": ["Consultant", "Advisor", "Specialist", "Analyst", "Designer", "Developer", "Marketer", "Sales"],
    "Ownership": ["Business Owner", "Entrepreneur", "Freelancer", "Creator", "Author", "Speaker", "Coach"],
    "Governance": ["Board Member", "Investor", "Mentor", "Advisor"],
    "Personal": ["Parent", "Partner", "Caregiver", "Student", "Volunteer", "Community Leader"]
  },
  
  personalTraits: {
    "Work Style": ["Strategic", "Creative", "Analytical", "Detail-oriented", "Organized", "Dependable", "Disciplined", "Efficient"],
    "Interpersonal": ["Leader", "Communicator", "Team player", "Empathetic", "Open-minded", "Emotionally intelligent", "Diplomatic", "Collaborative"],
    "Drive & Mindset": ["Self-starter", "Motivated", "Curious", "Resilient", "Confident", "Adaptable", "Ambitious", "Action-biased"],
    "Personality": ["Direct", "Warm", "Visionary", "Pragmatic", "Bold", "Calm", "Energetic", "Thoughtful"]
  },
  
  ambitions: {
    "Business": ["Build a national brand", "Scale my business", "Exit my company", "Launch a product", "Franchise", "Go public"],
    "Career": ["Become a C-suite executive", "Lead an organization", "Become an industry expert", "Board positions", "Consulting practice"],
    "Financial": ["Achieve financial independence", "Create generational wealth", "Multiple income streams", "Investment portfolio"],
    "Creative": ["Write a book", "Launch a podcast", "Build a platform", "Become a speaker", "Thought leadership"]
  },
  
  education: {
    "Degree Types": ["Bachelor's degree", "Master's degree", "MBA", "PhD", "JD", "MD", "Self-taught", "Bootcamp grad"],
    "Learning Style": ["Learn by doing", "Visual learner", "Avid reader", "Podcast learner", "Classroom learner", "Mentor-taught", "Research-oriented"]
  },
  
  experience: {
    "Years": ["5+ years", "10+ years", "15+ years", "20+ years", "25+ years"],
    "Domains": ["Leadership", "Management", "Consulting", "Operations", "Sales", "Marketing", "Finance", "Technology", "Product", "Strategy"],
    "Achievements": ["Built teams", "Managed P&L", "Led transformation", "Launched products", "Grew revenue", "Built from scratch", "Turnaround experience"]
  },
  
  currentProjects: {
    "Business": ["Launching a product", "Starting a business", "Scaling operations", "Leading a rebrand", "Fundraising", "M&A activity"],
    "Career": ["Job searching", "Career transition", "Getting promoted", "Building a team", "Expanding role", "New leadership position"],
    "Creative": ["Writing a book", "Building a course", "Starting a podcast", "Content creation", "Speaking tour", "Building platform"],
    "Development": ["Learning new skills", "Getting certified", "Executive coaching", "Leadership program", "Side project"]
  },
  
  accomplishments: {
    "Business Results": ["Doubled revenue", "Grew team 10x", "Successful exit", "IPO experience", "Turnaround success", "Market expansion"],
    "Recognition": ["Award-winner", "Industry recognition", "Published author", "Featured speaker", "Media coverage", "Top performer"],
    "Creation": ["Founded a company", "Built a product", "Created a movement", "Established a program", "Launched a brand", "Patented innovation"],
    "Impact": ["Led transformation", "Changed industry practice", "Mentored leaders", "Community impact", "Policy influence"]
  },
  
  energizers: {
    "Problem & Creation": ["Solving hard problems", "Building things", "Creating from scratch", "Fixing what's broken", "Designing solutions", "Strategic planning"],
    "People & Connection": ["Coaching others", "Deep conversation", "Collaboration", "Teaching", "Networking", "Leading teams", "Mentoring"],
    "Work Types": ["Creative work", "Analytical work", "Research", "Writing", "Public speaking", "Project management", "Sales", "Negotiation"],
    "Growth & Learning": ["Learning new skills", "Exploring ideas", "Reading", "Taking courses", "Experimenting", "Pushing limits"]
  },
  
  principles: {
    "Ethics": ["Integrity first", "Do the right thing", "Honesty always", "Ethical leadership", "Transparency", "Accountability"],
    "Mindset": ["Abundance mindset", "Growth mindset", "Own your outcomes", "No excuses", "Bias for action", "Continuous improvement"],
    "Philosophy": ["Faith-driven", "Evidence-based", "Long-term thinking", "People first", "Purpose over profit", "Service to others"],
    "Approach": ["Under-promise, over-deliver", "Start with why", "Fail fast, learn faster", "Done is better than perfect", "Trust but verify"]
  },
  
  commStyle: {
    "Tone": ["Direct but warm", "Professional", "Casual", "Formal", "Friendly", "Matter-of-fact"],
    "Mode": ["Written over verbal", "Verbal over written", "Visual communication", "Data-driven", "Story-driven"],
    "Interaction": ["Collaborative", "Action-oriented", "Consultative", "Coaching-style", "Socratic"],
    "Extras": ["Humor helps", "Keep it brief", "Love details", "Big picture first", "Examples help"]
  },
  
  howDescribed: {
    "Leadership": ["Strong leader", "Visionary", "Decisive", "Inspiring", "Influential", "Trusted"],
    "Character": ["Reliable", "Authentic", "Humble", "Confident", "Generous", "Kind"],
    "Work Style": ["Gets things done", "High performer", "Problem-solver", "Strategic thinker", "Creative", "Analytical"],
    "Presence": ["Calm under pressure", "Energetic", "Steady", "Approachable", "Commanding", "Thoughtful"],
    "Relationships": ["Connector", "Collaborator", "Mentor", "Team player", "Bridge builder", "Catalyst"]
  },
  
  personality: {
    "Myers-Briggs": ["INTJ", "ENTJ", "INTP", "ENTP", "INFJ", "ENFJ", "INFP", "ENFP", "ISTJ", "ESTJ", "ISFJ", "ESFJ", "ISTP", "ESTP", "ISFP", "ESFP"],
    "Enneagram": ["Type 1", "Type 2", "Type 3", "Type 4", "Type 5", "Type 6", "Type 7", "Type 8", "Type 9"],
    "DISC": ["High D", "High I", "High S", "High C", "D/I", "I/S", "S/C", "D/C"]
  },
  
  tendencies: {
    "Overwork": ["Taking on too much", "Not delegating", "Working too many hours", "Skipping breaks", "Always available"],
    "Avoidance": ["Avoiding conflict", "Putting off hard conversations", "Procrastinating on scary tasks", "Avoiding feedback"],
    "Focus": ["Getting lost in details", "Shiny object syndrome", "Context switching", "Losing big picture", "Over-researching"],
    "Self-worth": ["Undervaluing my work", "Not charging enough", "Underselling myself", "Downplaying achievements", "Imposter feelings"],
    "Emotions": ["Impatience", "Frustration", "Anxiety", "Overwhelm", "Perfectionism", "Self-criticism"]
  }
};

// ==== INTRO & SECTION INTRO SCREENS ====
const intro = {
  title: "Welcome!",
  body: `<div class="intro-icon">ü§ñ</div>
<strong>You're about to build your personal AI Coworker.</strong><br><br>
In the next 15 minutes, you'll:<br>
<ul class="intro-list">
<li>Define your AI's personality & strengths</li>
<li>Teach it about you, your goals & values</li>
<li>Get a personalized setup for ChatGPT, Claude, or Gemini</li>
</ul>
Ready? Let's go.`
};

const section1Intro = {
  title: "Section 1 of 2",
  body: `<div class="intro-icon">üéØ</div>
<strong>Define Your AI Coworker</strong><br><br>
What kind of partner do you need? Think about personality, tone, values‚Äîand what you <em>don't</em> want.<br><br>
<strong>Budget: 1,500 characters</strong> for this section. Choose wisely‚Äîor go over and trim later. Note that you can unselect options at any time and you can go back.`
};

const section2Intro = {
  title: "Section 2 of 2",
  body: `<div class="intro-icon">üë§</div>
<strong>Teach Your AI About You</strong><br><br>
Share your roles, goals, values, and how you operate. The more your AI knows, the better it can support you.<br><br>
<strong>Budget: 1,500 characters</strong> for this section.`
};

// ==== SECTION 1: DEFINE YOUR AI COWORKER ====
const section1 = [
  { q:"What would you like your AI Coworker's name to be?", prefix:"AI, your name is: ", placeholder:"", limit:30, tags: "aiName" },
  { q:"What traits should your ideal AI Coworker have?", prefix:"AI, you are: ", placeholder:"", limit:500, tags: "aiTraits" },
  { q:"What should your AI Coworker <em>not</em> do?", prefix:"AI, don't: ", placeholder:"", limit:500, tags: "aiDont" },
  { q:"What are your job-related goals‚Äîthe things you're paid to accomplish?", prefix:"AI, help me with these work goals: ", placeholder:"", limit:500, tags: "workGoals" },
  { q:"What are your personal aspirations‚Äîthe life you're building toward?", prefix:"AI, help me build toward: ", placeholder:"", limit:500, tags: "aspirations" },
  { q:"Should your AI Coworker share opinions and push back on you?", prefix:"AI, on sharing opinions: ", placeholder:"", limit:300, tags: "opinions" },
  { q:"What values matter to you that your AI Coworker should reflect?", prefix:"AI, honor these values: ", placeholder:"", limit:300, tags: "values" },
  { q:"What do you want your AI Coworker to teach or coach you on‚Äîevery interaction?", prefix:"AI, coach me on: ", placeholder:"", limit:500, tags: "coaching" },
  { q:"What should your AI Coworker prepare you for?", prefix:"AI, prepare me for: ", placeholder:"", limit:300, tags: "prepareFor" },
  { q:"What encouragement do you need to hear regularly?", prefix:"AI, remind me: ", placeholder:"", limit:400, tags: "encouragement" },
  { q:"What patterns or habits do you want help overcoming?", prefix:"AI, help me overcome: ", placeholder:"", limit:500, tags: "overcome" },
  { q:"How would you describe the quality and style of work you want to produce together?", prefix:"AI, our work style is: ", placeholder:"", limit:300, tags: "workStyle" },
  { q:"Big picture: what do you want your AI Coworker to help you become?", prefix:"AI, help me become: ", placeholder:"", limit:500, tags: "becomeWhat" }
];

// ==== SECTION 2: TEACH YOUR AI ABOUT YOU ====
const section2 = [
  { q:"What should your AI Coworker call you?", prefix:"Call me: ", placeholder:"Enter your preferred name", limit:30, tags: "yourName", freeformOnly: true },
  { q:"What roles do you currently hold‚Äîprofessionally and personally?", prefix:"My roles: ", placeholder:"", limit:500, tags: "roles" },
  { q:"What traits define how you operate and show up?", prefix:"I am: ", placeholder:"", limit:500, tags: "personalTraits" },
  { q:"What are your biggest ambitions‚Äîwhere are you headed?", prefix:"My ambitions: ", placeholder:"", limit:500, tags: "ambitions" },
  { q:"What's your educational background and how do you learn best?", prefix:"Education/learning: ", placeholder:"", limit:300, tags: "education" },
  { q:"Summarize your professional experience.", prefix:"Experience: ", placeholder:"", limit:700, tags: "experience" },
  { q:"What are you currently working on?", prefix:"Current projects: ", placeholder:"", limit:700, tags: "currentProjects" },
  { q:"What accomplishments or credentials should your AI know about?", prefix:"Accomplishments: ", placeholder:"", limit:700, tags: "accomplishments" },
  { q:"What naturally energizes you? What do you gravitate toward?", prefix:"I'm energized by: ", placeholder:"", limit:500, tags: "energizers" },
  { q:"What beliefs, philosophies, or principles guide your decisions?", prefix:"My guiding principles: ", placeholder:"", limit:500, tags: "principles" },
  { q:"How do you prefer to communicate and interact with others?", prefix:"My communication style: ", placeholder:"", limit:300, tags: "commStyle" },
  { q:"How do others typically describe you?", prefix:"Others describe me as: ", placeholder:"", limit:300, tags: "howDescribed" },
  { q:"What's your personality type, if you know it?", prefix:"Personality type: ", placeholder:"Skip if you're not sure", limit:300, tags: "personality" },
  { q:"What personal tendencies do you want your AI to help you manage?", prefix:"Help me manage: ", placeholder:"", limit:700, tags: "tendencies" }
];

// ==== PAGINATION SETUP ====
const s1len = section1.length, s2len = section2.length;
const totalPages = s1len + s2len + 5;
let pageIndex = 0;
const answers = Array(s1len + s2len).fill("");
const selectedTags = {};

const formContainer = document.getElementById("formContainer");
const progressBar   = document.getElementById("progressBar");
const prevBtn       = document.getElementById("prevBtn");
const nextBtn       = document.getElementById("nextBtn");

prevBtn.onclick = () => { 
  if(pageIndex>0){ 
    pageIndex--; 
    renderPage(); 
    scrollToTop();
  } 
};
nextBtn.onclick = () => {
  if(pageIndex>=2 && pageIndex<=1+s1len) saveAnswer(pageIndex-2);
  if(pageIndex>=3+s1len && pageIndex<=2+s1len+s2len) saveAnswer(s1len + (pageIndex-3-s1len));
  pageIndex++;
  renderPage();
  scrollToTop();
};

function scrollToTop() {
  const app = document.getElementById('app');
  if (app) {
    app.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }
  parent.postMessage({ scrollToTop: true }, "*");
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function renderHeader(){
  document.getElementById("header").innerHTML = `
    <img src="https://images.squarespace-cdn.com/content/672bffc68fd9b922d9f34a55/08a58d80-4436-4c37-a3b6-e3bb7e086c45/Strategic+Advisory+%282%29.png?content-type=image%2Fpng"
         alt="Nimbology logo"/>
    <h1>AI Coworker Blueprint‚Ñ¢</h1>`;
}

function renderPage(){
  renderHeader();
  formContainer.innerHTML = "";
  progressBar.style.width = `${pageIndex/(totalPages-1)*100}%`;

  prevBtn.disabled = pageIndex===0;
  nextBtn.style.display = "inline-block";
  nextBtn.disabled = false;

  if(pageIndex===0){
    nextBtn.innerText = "Let's Go ‚Üí";
    formContainer.innerHTML = `<div class="question" style="text-align:center;"><h2>${intro.title}</h2><p>${intro.body}</p></div>`;
  }
  else if(pageIndex===1){
    nextBtn.innerText = "Next ‚Üí";
    formContainer.innerHTML = `<div class="question" style="text-align:center;"><h2>${section1Intro.title}</h2><p>${section1Intro.body}</p></div>`;
  }
  else if(pageIndex>=2 && pageIndex<=1+s1len){
    nextBtn.innerText = "Next ‚Üí";
    renderQuestion(section1[pageIndex-2], pageIndex-2, 1);
  }
  else if(pageIndex===2+s1len){
    nextBtn.innerText = "Next ‚Üí";
    formContainer.innerHTML = `<div class="question" style="text-align:center;"><h2>${section2Intro.title}</h2><p>${section2Intro.body}</p></div>`;
  }
  else if(pageIndex>=3+s1len && pageIndex<=2+s1len+s2len){
    nextBtn.innerText = "Next ‚Üí";
    renderQuestion(section2[pageIndex-3-s1len], s1len + (pageIndex-3-s1len), 2);
  }
  else if(pageIndex===3+s1len+s2len){
    nextBtn.style.display = "none";
    formContainer.innerHTML = renderSummaryHtml();
  }
  else if(pageIndex===4+s1len+s2len){
    nextBtn.style.display = "none";
    formContainer.innerHTML = `
      <div class="celebration">
        <h2>You're All Set! üéâ</h2>
        <p>Your AI Coworker is ready to work.</p>
      </div>
      <p style="text-align:center;">Start a conversation with your AI and see the difference.<br><br>
      Questions? <a href="https://nimbology.com/contact" target="_blank">nimbology.com/contact</a></p>`;
  }
}

function calculateSectionTotal(sectionNum) {
  let sum = 0;
  const start = sectionNum === 1 ? 0 : s1len;
  const end = sectionNum === 1 ? s1len : s1len + s2len;
  const section = sectionNum === 1 ? section1 : section2;
  
  for(let i = start; i < end; i++) {
    const sectionIdx = sectionNum === 1 ? i : i - s1len;
    const prefix = section[sectionIdx]?.prefix || "";
    const answer = answers[i] || "";
    if (answer.trim()) {
      sum += prefix.length + answer.length + 2; // +2 for ". " separator
    }
  }
  return sum;
}

function renderQuestion(item, idx, sectionNum){
  const prefixHtml = item.prefix ? `<div class="prefix-display">${item.prefix}</div>` : '';
  
  // Calculate section total
  const sectionTotal = calculateSectionTotal(sectionNum);
  const percentage = Math.min((sectionTotal / CHAR_LIMIT) * 100, 100);
  const isWarning = percentage >= WARNING_THRESHOLD * 100 && percentage < 100;
  const isOver = sectionTotal > CHAR_LIMIT;
  
  // Budget bar HTML
  const budgetHtml = `
    <div class="char-budget">
      <div class="char-budget-header">
        <span class="char-budget-label">Section ${sectionNum} Budget</span>
        <span class="char-budget-count ${isWarning ? 'warning' : ''} ${isOver ? 'over' : ''}">${sectionTotal} / ${CHAR_LIMIT}</span>
      </div>
      <div class="char-budget-bar-bg">
        <div class="char-budget-bar-fill ${isWarning ? 'warning' : ''} ${isOver ? 'over' : ''}" style="width: ${percentage}%"></div>
      </div>
      <div class="char-budget-message ${isWarning && !isOver ? 'warning' : ''} ${isOver ? 'over' : ''}">
        ${isOver ? "‚ö†Ô∏è You're over budget. You can still continue, but you may need to trim later." : ""}
        ${isWarning && !isOver ? "Getting close! Choose your remaining options carefully." : ""}
      </div>
    </div>`;
  
  // Tag selector HTML
  let tagSelectorHtml = '';
  if (item.tags && tagOptions[item.tags] && !item.freeformOnly) {
    tagSelectorHtml = renderTagSelector(item.tags, idx);
  }
  
  const placeholderText = item.tags && !item.freeformOnly 
    ? 'Click options above or type your own...' 
    : (item.placeholder || 'Type here...');
  
  formContainer.innerHTML = `
    <div class="question">
      ${budgetHtml}
      <label>${item.q}</label>
      ${prefixHtml}
      ${tagSelectorHtml}
      <textarea id="inputField" placeholder="${placeholderText}"></textarea>
    </div>`;
  
  const ta = document.getElementById("inputField");
  ta.value = answers[idx] || "";
  ta.oninput = () => {
    answers[idx] = ta.value;
    updateBudgetDisplay(sectionNum);
  };
  
  window.currentIdx = idx;
  window.currentSectionNum = sectionNum;
  window.currentTags = item.tags || null;
  
  // Restore selected tag states
  if (item.tags && selectedTags[idx] && !item.freeformOnly) {
    selectedTags[idx].forEach(tag => {
      const chip = document.querySelector(`.tag-chip[data-tag="${tag}"]`);
      if (chip) chip.classList.add('selected');
    });
  }
  
  if (item.tags && !item.freeformOnly) {
    attachTagHandlers(idx);
  }
}

function updateBudgetDisplay(sectionNum) {
  const sectionTotal = calculateSectionTotal(sectionNum);
  const percentage = Math.min((sectionTotal / CHAR_LIMIT) * 100, 100);
  const isWarning = percentage >= WARNING_THRESHOLD * 100 && percentage < 100;
  const isOver = sectionTotal > CHAR_LIMIT;
  
  const countEl = document.querySelector('.char-budget-count');
  const barEl = document.querySelector('.char-budget-bar-fill');
  const msgEl = document.querySelector('.char-budget-message');
  
  if (countEl) {
    countEl.textContent = `${sectionTotal} / ${CHAR_LIMIT}`;
    countEl.className = 'char-budget-count' + (isWarning ? ' warning' : '') + (isOver ? ' over' : '');
  }
  
  if (barEl) {
    barEl.style.width = `${percentage}%`;
    barEl.className = 'char-budget-bar-fill' + (isWarning ? ' warning' : '') + (isOver ? ' over' : '');
  }
  
  if (msgEl) {
    msgEl.className = 'char-budget-message' + (isWarning && !isOver ? ' warning' : '') + (isOver ? ' over' : '');
    if (isOver) {
      msgEl.innerHTML = "‚ö†Ô∏è You're over budget. You can still continue, but you may need to trim later.";
    } else if (isWarning) {
      msgEl.innerHTML = "Getting close! Choose your remaining options carefully.";
    } else {
      msgEl.innerHTML = "";
    }
  }
  
  // No longer disabling the Next button - soft warning only
}

function renderTagSelector(tagType, idx) {
  const options = tagOptions[tagType];
  let html = '<div class="tag-selector">';
  html += '<p class="tag-helper">Click to select, click again to remove. Type your own below.</p>';
  
  for (const [category, tags] of Object.entries(options)) {
    html += `<div class="tag-category">`;
    html += `<div class="tag-category-label">${category}</div>`;
    html += `<div class="tag-grid">`;
    tags.forEach(tag => {
      const isSelected = selectedTags[idx] && selectedTags[idx].includes(tag);
      html += `<span class="tag-chip ${isSelected ? 'selected' : ''}" data-tag="${tag}">${tag}</span>`;
    });
    html += `</div></div>`;
  }
  
  html += `<a class="clear-tags" onclick="clearAllTags(${idx})">‚úï Clear selections</a>`;
  html += '</div>';
  return html;
}

function attachTagHandlers(idx) {
  document.querySelectorAll('.tag-chip').forEach(chip => {
    chip.addEventListener('click', () => toggleTag(chip, idx));
  });
}

function toggleTag(chip, idx) {
  const tag = chip.dataset.tag;
  const ta = document.getElementById("inputField");
  
  if (!selectedTags[idx]) selectedTags[idx] = [];
  
  if (chip.classList.contains('selected')) {
    chip.classList.remove('selected');
    selectedTags[idx] = selectedTags[idx].filter(t => t !== tag);
    
    let currentText = ta.value;
    currentText = currentText.replace(new RegExp(tag + '\\.\\s*', 'g'), '');
    currentText = currentText.replace(new RegExp(tag + ',\\s*', 'g'), '');
    currentText = currentText.replace(new RegExp(tag + '\\s*$', 'g'), '');
    currentText = currentText.replace(/\.\s*\./g, '.').replace(/,\s*,/g, ',').trim();
    currentText = currentText.replace(/[,.\s]+$/, '').trim();
    ta.value = currentText;
  } else {
    chip.classList.add('selected');
    selectedTags[idx].push(tag);
    
    if (ta.value.trim() === '') {
      ta.value = tag;
    } else {
      const lastChar = ta.value.trim().slice(-1);
      if (['.', ',', '!', '?'].includes(lastChar)) {
        ta.value = ta.value.trim() + ' ' + tag;
      } else {
        ta.value = ta.value.trim() + '. ' + tag;
      }
    }
  }
  
  answers[idx] = ta.value;
  updateBudgetDisplay(window.currentSectionNum);
}

function clearAllTags(idx) {
  document.querySelectorAll('.tag-chip.selected').forEach(chip => {
    chip.classList.remove('selected');
  });
  selectedTags[idx] = [];
  const ta = document.getElementById("inputField");
  ta.value = '';
  answers[idx] = '';
  updateBudgetDisplay(window.currentSectionNum);
}

function saveAnswer(idx){
  const field = document.getElementById("inputField");
  if(field) answers[idx] = field.value;
}

function buildSectionText(startIdx, endIdx, section) {
  const parts = [];
  for(let i = startIdx; i < endIdx; i++) {
    const sectionIdx = i - startIdx;
    const prefix = section[sectionIdx]?.prefix || "";
    const answer = answers[i] || "";
    if (answer.trim()) {
      parts.push(prefix + answer);
    }
  }
  return parts.join(". ") + (parts.length > 0 ? "." : "");
}

function showInstructions(platform) {
  document.querySelectorAll('.platform-instructions').forEach(el => el.style.display = 'none');
  document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
  document.getElementById(platform + '-instructions').style.display = 'block';
  event.target.classList.add('active');
}

function renderSummaryHtml(){
  const sec1 = buildSectionText(0, s1len, section1);
  const sec2 = buildSectionText(s1len, s1len + s2len, section2);
  const sec1Len = sec1.length;
  const sec2Len = sec2.length;
  
  const sec1Status = sec1Len > CHAR_LIMIT ? `<span style="color:var(--red);">(${sec1Len} chars - over limit, may need trimming)</span>` : `<span style="color:var(--green);">(${sec1Len} chars ‚úì)</span>`;
  const sec2Status = sec2Len > CHAR_LIMIT ? `<span style="color:var(--red);">(${sec2Len} chars - over limit, may need trimming)</span>` : `<span style="color:var(--green);">(${sec2Len} chars ‚úì)</span>`;
  
  return `
    <div class="celebration">
      <h2>You Did It! üéâ</h2>
      <p>Your AI Coworker is ready to meet you.</p>
    </div>

    <div class="email-section-top">
      <h3>üìß Save Your Results</h3>
      <div class="warning">
        <strong>Important:</strong> We don't store any of your answers. Once you leave this page, your results are gone forever. Email yourself a copy now!
      </div>
      <div class="email-input-row">
        <input type="email" id="userEmail" placeholder="you@example.com"/>
        <button onclick="sendEmail()">Email My Results</button>
      </div>
      <div class="email-alt">
        <a onclick="downloadResults()">Or download as a file instead</a>
      </div>
    </div>

    <p>Copy each section below and paste it into your AI's settings:</p>

    <div class="platform-tabs">
      <button onclick="showInstructions('chatgpt')" class="tab-btn active">ChatGPT</button>
      <button onclick="showInstructions('claude')" class="tab-btn">Claude</button>
      <button onclick="showInstructions('gemini')" class="tab-btn">Gemini</button>
    </div>

    <div id="chatgpt-instructions" class="platform-instructions">
      <p>ChatGPT Setup:</p>
      <ul>
        <li>Go to <strong>Settings ‚Üí Personalization ‚Üí Customization</strong></li>
        <li><strong>Section 1</strong> ‚Üí Paste into "What traits should ChatGPT have?"</li>
        <li><strong>Section 2</strong> ‚Üí Paste into "What should ChatGPT know about you?"</li>
      </ul>
    </div>

    <div id="claude-instructions" class="platform-instructions" style="display:none;">
      <p>Claude Setup:</p>
      <ul>
        <li>Go to <strong>Settings ‚Üí Profile</strong></li>
        <li>Paste <strong>both sections</strong> into "What personal preferences should Claude consider?"</li>
      </ul>
    </div>

    <div id="gemini-instructions" class="platform-instructions" style="display:none;">
      <p>Gemini Setup:</p>
      <ul>
        <li>Go to <strong>Settings ‚Üí Saved Info</strong></li>
        <li>Paste <strong>both sections</strong> (you may need to split into multiple entries)</li>
      </ul>
    </div>

    <div class="result-section-header">
      <div class="section-number">1</div>
      <h3>Your AI Coworker ${sec1Status}</h3>
    </div>
    <div class="summary" id="sum1">${sec1}</div>
    <button class="copy-btn" onclick="copyToClipboard('sum1')">üìã Copy Section 1</button>

    <div class="result-section-header">
      <div class="section-number">2</div>
      <h3>About You ${sec2Status}</h3>
    </div>
    <div class="summary" id="sum2">${sec2}</div>
    <button class="copy-btn" onclick="copyToClipboard('sum2')">üìã Copy Section 2</button>

    <div class="next-steps">
      <h3>What's Next?</h3>
      
      <div class="next-step-item">
        <div class="next-step-icon">üé¨</div>
        <div class="next-step-content">
          <h4>Watch the Video Series (Coming Soon)</h4>
          <p>Learn the thinking behind every question‚Äîand see how I configured my own AI.</p>
        </div>
      </div>
      
      <div class="next-step-item">
        <div class="next-step-icon">üë•</div>
        <div class="next-step-content">
          <h4>Join an Upcoming Cohort</h4>
          <p>Learn alongside other leaders in a live workshop. <a href="https://nimbology.com/contact" target="_blank">Get on the waitlist ‚Üí</a></p>
        </div>
      </div>
      
      <div class="next-step-item">
        <div class="next-step-icon">üöÄ</div>
        <div class="next-step-content">
          <h4>1:1 Coaching</h4>
          <p>Personalized guidance on AI strategy, leadership, or your next chapter. <a href="https://nimbology.com/contact" target="_blank">Let's talk ‚Üí</a></p>
        </div>
      </div>
    </div>`;
}

function copyToClipboard(id) {
  const text = document.getElementById(id).innerText;
  navigator.clipboard.writeText(text);
  showToast('Copied! Ready to paste.');
}

function showToast(msg){
  const t = document.getElementById("toast");
  t.innerText = msg;
  t.style.display = "block";
  setTimeout(()=> t.style.display="none", 3000);
}

function sendEmail(){
  const userEmail = document.getElementById("userEmail").value.trim();
  if(!userEmail) return showToast("Please enter your email.");
  
  const sec1 = buildSectionText(0, s1len, section1);
  const sec2 = buildSectionText(s1len, s1len + s2len, section2);
  const emailBody = buildEmailContent(sec1, sec2);
  
  emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, {
    to_email: userEmail, 
    section1: sec1, 
    section2: sec2,
    full_content: emailBody
  })
  .then(response => {
    console.log("SUCCESS:", response);
    showToast("‚úì Email sent! Check your inbox.");
  })
  .catch(err => {
    console.error("EMAIL ERROR:", err);
    showToast("Email failed. Try downloading instead.");
  });
}

function buildEmailContent(sec1, sec2) {
  return `
üéâ CONGRATULATIONS!

You just completed the AI Coworker Blueprint‚Ñ¢‚Äîand your AI is about to get a whole lot smarter about YOU.

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üîí YOUR PRIVACY, PROTECTED

Here's something important: we didn't store a single answer you gave.

Not one.

This email is the only record of your Blueprint. We built it this way on purpose‚Äîbecause in a world where everyone wants your data, we wanted to prove you can get real value without giving up your privacy.

Your information stays yours. Always.

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üìã WHAT TO DO WITH YOUR RESULTS

1. COPY SECTION 1 (Your AI Coworker) below
2. PASTE IT into your AI's settings:
   ‚Ä¢ ChatGPT: Settings ‚Üí Personalization ‚Üí "What traits should ChatGPT have?"
   ‚Ä¢ Claude: Settings ‚Üí Profile ‚Üí Personal Preferences
   ‚Ä¢ Gemini: Settings ‚Üí Saved Info

3. COPY SECTION 2 (About You) below
4. PASTE IT into:
   ‚Ä¢ ChatGPT: "What should ChatGPT know about you?"
   ‚Ä¢ Claude: Same Personal Preferences field
   ‚Ä¢ Gemini: Saved Info (may need multiple entries)

5. START A CONVERSATION and watch the difference.

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üìÑ SECTION 1: YOUR AI COWORKER
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

${sec1}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üìÑ SECTION 2: ABOUT YOU
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

${sec2}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üöÄ WANT TO GO DEEPER?

This Blueprint is just the beginning. Here's how to keep building:

‚Üí VIDEO SERIES (Coming Soon)
I'm creating a walkthrough that explains the thinking behind every question‚Äîand shows you how I configured my own AI. Stay tuned.

‚Üí JOIN A COHORT
Learn alongside other leaders in a live workshop. Limited spots, real transformation.
https://nimbology.com/contact

‚Üí 1:1 COACHING
Want personalized guidance on AI strategy, leadership, or building your next chapter? Let's talk.
https://nimbology.com/contact

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Thanks for trusting me with this.

Now go put your AI Coworker to work.

‚Äî Liz B. Baker
Founder, Nimbology
https://nimbology.com

P.S. If someone you know could use an AI Coworker that actually gets them, send them my way. But please don't share the Blueprint link directly‚Äîhave them reach out at nimbology.com/contact so we can make sure they're set up for success.
`;
}

function downloadResults() {
  const sec1 = buildSectionText(0, s1len, section1);
  const sec2 = buildSectionText(s1len, s1len + s2len, section2);
  const content = buildEmailContent(sec1, sec2);
  
  const blob = new Blob([content], { type: "text/plain" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "AI-Coworker-Blueprint-Results.txt";
  a.click();
  showToast("‚úì Download started!");
}

renderPage();
</script>

<script>
function sendHeight() {
  const height = document.body.scrollHeight;
  parent.postMessage({ aiBlueprintHeight: height }, "*");
}
window.onload = sendHeight;
window.onresize = sendHeight;
document.addEventListener('input', sendHeight);
document.addEventListener('click', sendHeight);
setInterval(sendHeight, 500);
</script>
</body>
</html>
