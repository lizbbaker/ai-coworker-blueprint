<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>AI Coworker Blueprint™ | Nimbology</title>
  <style>
    * { box-sizing:border-box; }
    body { margin:0; padding:0; background:transparent; font-family: 'Segoe UI', system-ui, sans-serif; }
    #app {
      max-width:600px;
      margin:2rem auto;
      background:#ebf5f6;
      border-radius:8px;
      overflow:hidden;
      box-shadow: 0 4px 20px rgba(0,0,0,0.12);
    }

    #header { background:#fff; padding:1.25rem; }
    #header img { vertical-align:middle; }
    #header h1 { display:inline-block; margin:0 0 0 1rem; color:#0e2029; font-size:1.6rem; vertical-align:middle; }
    .progress { height:8px; background:#e0e0e0; width:100%; }
    .progress-bar { height:8px; background:#3b82f6; width:0%; transition:width .3s ease; }
    #formContainer { padding:1.5rem; }
    .question { margin-bottom:1.5rem; }
    .question h2 { color:#0e2029; margin-bottom:0.75rem; }
    .question p { line-height:1.6; color:#333; }
    label { display:block; margin-bottom:.5rem; font-weight:600; color:#0e2029; }
    .prefix-display { 
      background:#fff; 
      padding:0.6rem 0.75rem; 
      border-radius:4px; 
      margin-bottom:0.5rem; 
      font-style:italic; 
      color:#555;
      border-left: 3px solid #3b82f6;
    }
    input[type=text], input[type=email], textarea {
      width:100%; 
      padding:.65rem; 
      font-size:1rem; 
      border:1px solid #ccc; 
      border-radius:4px;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    input[type=text]:focus, input[type=email]:focus, textarea:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59,130,246,0.15);
    }
    textarea { resize:vertical; min-height:110px; }
    .char-count { font-size:.875rem; color:#555; margin-top:.35rem; }
    .controls { display:flex; justify-content:space-between; padding:1rem 1.5rem; background:#fff; border-top: 1px solid #eee; }
    button {
      padding:.65rem 1.4rem; 
      font-size:1rem; 
      font-weight: 500;
      border:none; 
      border-radius:6px; 
      cursor:pointer;
      background:#db4227; 
      color:#fff;
      transition: background 0.2s, transform 0.1s;
    }
    button:hover:not([disabled]) {
      background: #c13820;
      transform: translateY(-1px);
    }
    button[disabled] { background:#ccc; cursor:default; transform: none; }
    .copy-btn { 
      margin-top: 0.75rem;
      background: #0e2029;
    }
    .copy-btn:hover {
      background: #1a3040;
    }
    .summary { 
      background:#fff; 
      padding:1rem; 
      border:1px solid #ddd; 
      border-radius:6px; 
      white-space:pre-wrap; 
      font-size: 0.95rem;
      line-height: 1.5;
      color: #333;
      max-height: 200px;
      overflow-y: auto;
    }
    #footer {
      background:#0e2029; 
      color:#fff; 
      text-align:center; 
      padding:1rem 1.5rem; 
      font-size:.85rem;
      line-height: 1.6;
    }
    #footer a { color: #7dd3fc; }
    #toast {
      position: fixed;
      top: 2rem;
      left: 50%;
      transform: translateX(-50%);
      background: #fff;
      color: #222;
      padding: 1rem 1.75rem;
      border-radius: 8px;
      display: none;
      font-size: 1.05rem;
      font-weight: 500;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      z-index: 9999;
      border: 2px solid #22c55e;
    }

    /* Platform Tabs */
    .platform-tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }
    .tab-btn {
      padding: 0.5rem 1rem;
      background: #e5e7eb;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 500;
      color: #374151;
      transition: all 0.2s;
    }
    .tab-btn:hover {
      background: #d1d5db;
    }
    .tab-btn.active {
      background: #3b82f6;
      color: white;
    }
    .platform-instructions {
      background: #fff;
      padding: 1rem;
      border-radius: 6px;
      margin-bottom: 1.25rem;
      border-left: 3px solid #3b82f6;
    }
    .platform-instructions p {
      margin: 0 0 0.5rem 0;
      font-weight: 600;
      color: #0e2029;
    }
    .platform-instructions ul {
      margin: 0;
      padding-left: 1.25rem;
    }
    .platform-instructions li {
      margin-bottom: 0.25rem;
      color: #333;
    }

    /* Section headers on final page */
    .result-section-header {
      display: flex;
      align-items: center;
      margin: 1.5rem 0 0.75rem 0;
    }
    .result-section-header h3 {
      margin: 0;
      color: #0e2029;
    }
    .section-number {
      background: #3b82f6;
      color: white;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 0.9rem;
      margin-right: 0.75rem;
    }

    /* Video CTA */
    .video-cta {
      background: linear-gradient(135deg, #0e2029 0%, #1e3a4c 100%);
      padding: 1.25rem;
      border-radius: 8px;
      margin: 1.5rem 0;
      text-align: center;
    }
    .video-cta p {
      color: #fff;
      margin: 0 0 0.75rem 0;
    }
    .video-cta p:first-child {
      font-weight: 600;
      font-size: 1.05rem;
    }
    .video-cta p:last-of-type {
      font-size: 0.9rem;
      opacity: 0.9;
    }
    .video-cta button {
      background: #3b82f6;
      margin-top: 0.5rem;
    }
    .video-cta button:hover {
      background: #2563eb;
    }

    /* Email section */
    .email-section {
      background: #fff;
      padding: 1rem;
      border-radius: 6px;
      margin-top: 1.5rem;
    }
    .email-section label {
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* Use suggestions link */
    .use-suggestions {
      display: inline-block;
      margin-top: 0.5rem;
      font-size: 0.9rem;
      color: #3b82f6;
      cursor: pointer;
      text-decoration: none;
      transition: color 0.2s;
    }
    .use-suggestions:hover {
      color: #2563eb;
      text-decoration: underline;
    }
    .use-suggestions.used {
      color: #9ca3af;
      cursor: default;
    }
    .use-suggestions.used:hover {
      text-decoration: none;
    }
    .email-section input[type="checkbox"] {
      width: 18px;
      height: 18px;
      cursor: pointer;
    }
    #emailInput {
      margin-top: 0.75rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    #emailInput input[type="email"] {
      flex: 1;
      min-width: 200px;
    }
    #emailInput button {
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
    }
    .download-btn {
      background: #6b7280 !important;
    }
    .download-btn:hover {
      background: #4b5563 !important;
    }

    /* Celebration header */
    .celebration {
      text-align: center;
      margin-bottom: 1.5rem;
    }
    .celebration h2 {
      color: #0e2029;
      font-size: 1.75rem;
      margin: 0 0 0.5rem 0;
    }
    .celebration p {
      color: #333;
      font-size: 1.05rem;
      margin: 0;
    }

    hr {
      border: none;
      border-top: 1px solid #ddd;
      margin: 1.5rem 0;
    }
  </style>
</head>
<body>
  <div id="app">
    <div id="header">
      <img src="https://images.squarespace-cdn.com/content/672bffc68fd9b922d9f34a55/08a58d80-4436-4c37-a3b6-e3bb7e086c45/Strategic+Advisory+%282%29.png?content-type=image%2Fpng"
           width="200" alt="Nimbology logo"/>
      <h1>AI Coworker Blueprint™</h1>
    </div>
    <div class="progress"><div class="progress-bar" id="progressBar"></div></div>
    <div id="formContainer"></div>
    <div class="controls">
      <button id="prevBtn" disabled>Back</button>
      <button id="nextBtn">Next</button>
    </div>
    <div id="footer">
      <div>
        *This form was custom-built with privacy in mind.<br>
        No results are stored or visible to third parties.<br>
        Your data stays yours—always.<br><br>
        This resource is for Nimbology clients and workshop participants.<br>
        Want to share it? Connect them with us at <a href="nimbology.com/contact">nimbology.com/contact</a>
      </div>
    </div>
  </div>

  <div id="toast"></div>

  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

<script>
// ==== CONFIGURE EmailJS ====
const EMAILJS_USER_ID    = 'SFReYwwY4dQJsG2ap';
const EMAILJS_SERVICE_ID = 'service_gpqnffd';
const EMAILJS_TEMPLATE_ID= 'template_roe9gvx';
emailjs.init(EMAILJS_USER_ID);

// ==== INTRO & SECTION INTRO SCREENS ====
const intro = {
  title: "Welcome!",
  body: `<strong>You're a few steps away from building your personal AI Coworker.</strong><br><br>
You'll define its personality and teach it about you. At the end, you'll get your personalized setup ready to paste into ChatGPT, Claude, or Gemini.<br><br>
Takes about 15 minutes. Worth every one of them.<br><br>
When you're ready, click <strong>Start</strong>.`
};

const section1Intro = {
  title: "Section 1: Define Your AI Coworker",
  body: `<strong>What kind of partner do you need?</strong><br><br>
Think about personality, tone, strengths, values—and what you <em>don't</em> want.<br><br>
You have up to 1,500 characters total for this section. Be specific. Be bold.<br><br>
Click <strong>Next</strong> when you're ready.`
};

const section2Intro = {
  title: "Section 2: Teach Your AI About You",
  body: `<strong>Now it's your turn.</strong><br><br>
Share your roles, goals, values, and how you operate. The more your AI knows, the better it can support you.<br><br>
Be honest. Be aspirational. You can always update this later.<br><br>
Up to 1,500 characters for this section.`
};

// ==== SECTION 1: DEFINE YOUR AI COWORKER ====
const section1 = [
  { q:"What would you like your AI Coworker's name to be?", prefix:"AI, your name is: ", placeholder:"Javi, Max, Sage, or whatever fits", limit:30 },
  { q:"What traits should your ideal AI Coworker have?", prefix:"AI, you are: ", placeholder:"Direct, no BS. High EQ. Strategic but practical. Sharp, fun, challenges me. Executive presence.", limit:500 },
  { q:"What should your AI Coworker <em>not</em> do?", prefix:"AI, don't: ", placeholder:"Flatter me. Be a yes-person. Overcomplicate things. Use emojis. Hedge when I need clarity.", limit:500 },
  { q:"What are your job-related goals—the things you're paid to accomplish?", prefix:"AI, help me with these work goals: ", placeholder:"Hit revenue targets. Lead my team well. Ship projects on time. Get promoted. Protect my focus.", limit:500 },
  { q:"What are your personal aspirations—the life you're building toward?", prefix:"AI, help me build toward: ", placeholder:"Financial freedom. Writing a book. Starting a business. More time with family. Location independence.", limit:500 },
  { q:"Should your AI Coworker share opinions and push back on you?", prefix:"AI, on sharing opinions: ", placeholder:"Yes—challenge my thinking. Give me your take, then let me decide.", limit:300 },
  { q:"What values matter to you that your AI Coworker should reflect?", prefix:"AI, honor these values: ", placeholder:"Integrity. Excellence. Generosity. Truth over comfort. People over profit.", limit:300 },
  { q:"What do you want your AI Coworker to teach or coach you on—every interaction?", prefix:"AI, coach me on: ", placeholder:"Executive presence. Negotiation. Financial thinking. Strategic clarity. Confident communication.", limit:500 },
  { q:"What should your AI Coworker prepare you for?", prefix:"AI, prepare me for: ", placeholder:"Critics and detractors. Blind spots. Hard conversations. Opportunities I might miss.", limit:300 },
  { q:"What encouragement do you need to hear regularly?", prefix:"AI, remind me: ", placeholder:"I'm capable of this. Celebrate small wins. Stay focused on what matters. Trust the process.", limit:400 },
  { q:"What patterns or habits do you want help overcoming?", prefix:"AI, help me overcome: ", placeholder:"Perfectionism. Overthinking. People-pleasing. Procrastination on hard tasks. Saying yes too often.", limit:500 },
  { q:"How would you describe the quality and style of work you want to produce together?", prefix:"AI, our work style is: ", placeholder:"Clear, sharp, original. Substance over flash. Done is better than perfect. Built to last.", limit:300 },
  { q:"Big picture: what do you want your AI Coworker to help you become?", prefix:"AI, help me become: ", placeholder:"A better leader. Financially free. Someone who creates real impact. The best version of myself.", limit:500 }
];

// ==== SECTION 2: TEACH YOUR AI ABOUT YOU ====
const section2 = [
  { q:"What should your AI Coworker call you?", prefix:"Call me: ", placeholder:"Liz, Dr. Chen, Coach, or your preferred name", limit:30 },
  { q:"What roles do you currently hold—professionally and personally?", prefix:"My roles: ", placeholder:"Founder. Team lead. Board member. Parent. Creator. Advisor. Student.", limit:500 },
  { q:"What traits define how you operate and show up?", prefix:"I am: ", placeholder:"Strategic, creative, direct, curious, resilient, people-oriented, action-biased", limit:500 },
  { q:"What are your biggest ambitions—where are you headed?", prefix:"My ambitions: ", placeholder:"Build a national brand. Achieve financial independence. Lead an organization. Write a book. Create generational wealth.", limit:500 },
  { q:"What's your educational background or how do you learn best?", prefix:"Education/learning: ", placeholder:"MBA from State U. Self-taught designer. Learn by doing. Visual learner. Avid reader.", limit:300 },
  { q:"Summarize your professional experience.", prefix:"Experience: ", placeholder:"15 years in marketing leadership. Former consultant. Built two startups. Managed teams of 20+.", limit:700 },
  { q:"What are you currently working on?", prefix:"Current projects: ", placeholder:"Launching a product. Writing a proposal. Leading a rebrand. Job searching. Building a side business.", limit:700 },
  { q:"What accomplishments or credentials should your AI know about?", prefix:"Accomplishments: ", placeholder:"Published author. Award-winning campaign. Doubled revenue in 18 months. Founded a nonprofit.", limit:700 },
  { q:"What naturally energizes you? What do you gravitate toward?", prefix:"I'm energized by: ", placeholder:"Solving hard problems. Coaching others. Building things. Deep conversation. Creative work.", limit:500 },
  { q:"What beliefs, philosophies, or principles guide your decisions?", prefix:"My guiding principles: ", placeholder:"Integrity first. Abundance mindset. Own your outcomes. Faith-driven. Evidence-based. Long-term thinking.", limit:500 },
  { q:"How do you prefer to communicate and interact with others?", prefix:"My communication style: ", placeholder:"Direct but warm. Collaborative. Action-oriented. Humor helps. Written over verbal.", limit:300 },
  { q:"How do others typically describe you?", prefix:"Others describe me as: ", placeholder:"Reliable. Visionary. Calm under pressure. Connector. Gets things done. Big-picture thinker.", limit:300 },
  { q:"What's your personality type, if you know it?", prefix:"Personality type: ", placeholder:"ENFP. Enneagram 3. High D on DISC. Or skip if you're not sure.", limit:300 },
  { q:"What personal tendencies do you want your AI to help you manage?", prefix:"Help me manage: ", placeholder:"Taking on too much. Avoiding conflict. Getting lost in details. Undervaluing my work. Impatience.", limit:700 }
];

// ==== PAGINATION SETUP ====
const s1len = section1.length, s2len = section2.length;
const totalPages = s1len + s2len + 5;
let pageIndex = 0;
const answers = Array(s1len + s2len).fill("");

const formContainer = document.getElementById("formContainer");
const progressBar   = document.getElementById("progressBar");
const prevBtn       = document.getElementById("prevBtn");
const nextBtn       = document.getElementById("nextBtn");

prevBtn.onclick = () => { if(pageIndex>0){ pageIndex--; renderPage(); } };
nextBtn.onclick = () => {
  if(pageIndex>=2 && pageIndex<=1+s1len) saveAnswer(pageIndex-2);
  if(pageIndex>=3+s1len && pageIndex<=2+s1len+s2len) saveAnswer(s1len + (pageIndex-3-s1len));
  pageIndex++;
  renderPage();
};

function renderHeader(){
  document.getElementById("header").innerHTML = `
    <img src="https://images.squarespace-cdn.com/content/672bffc68fd9b922d9f34a55/08a58d80-4436-4c37-a3b6-e3bb7e086c45/Strategic+Advisory+%282%29.png?content-type=image%2Fpng"
         width="200" alt="Nimbology logo"/>
    <h1>AI Coworker Blueprint™</h1>`;
}

function renderPage(){
  renderHeader();
  formContainer.innerHTML = "";
  progressBar.style.width = `${pageIndex/(totalPages-1)*100}%`;

  prevBtn.disabled = pageIndex===0;
  nextBtn.style.display = "inline-block";

  if(pageIndex===0){
    nextBtn.innerText = "Start";
    formContainer.innerHTML = `<div class="question"><h2>${intro.title}</h2><p>${intro.body}</p></div>`;
  }
  else if(pageIndex===1){
    nextBtn.innerText = "Next";
    formContainer.innerHTML = `<div class="question"><h2>${section1Intro.title}</h2><p>${section1Intro.body}</p></div>`;
  }
  else if(pageIndex>=2 && pageIndex<=1+s1len){
    nextBtn.innerText = "Next";
    renderQuestion(section1[pageIndex-2], pageIndex-2);
  }
  else if(pageIndex===2+s1len){
    nextBtn.innerText = "Next";
    formContainer.innerHTML = `<div class="question"><h2>${section2Intro.title}</h2><p>${section2Intro.body}</p></div>`;
  }
  else if(pageIndex>=3+s1len && pageIndex<=2+s1len+s2len){
    nextBtn.innerText = "Next";
    renderQuestion(section2[pageIndex-3-s1len], s1len + (pageIndex-3-s1len));
  }
  else if(pageIndex===3+s1len+s2len){
    nextBtn.style.display = "none";
    formContainer.innerHTML = renderSummaryHtml();
    attachEmailToggle();
  }
  else if(pageIndex===4+s1len+s2len){
    nextBtn.style.display = "none";
    formContainer.innerHTML = `
      <div class="celebration">
        <h2>You're All Set!</h2>
        <p>Your AI Coworker is configured and ready to work.</p>
      </div>
      <p>Start a conversation with your AI and see the difference. If you have questions or want to unlock more, reach out anytime:</p>
      <p><a href="https://nimbology.com/contact" target="_blank">nimbology.com/contact</a></p>`;
  }
}

function renderQuestion(item, idx){
  const prefixHtml = item.prefix ? `<div class="prefix-display">${item.prefix}</div>` : '';
  const hasSuggestion = item.placeholder && item.placeholder !== '[enter name]' && !item.placeholder.startsWith('[');
  const suggestionHtml = hasSuggestion 
    ? `<a class="use-suggestions" id="useSuggestions" onclick="useSuggestions()">Need ideas? Use suggestions</a>` 
    : '';
  
  formContainer.innerHTML = `
    <div class="question">
      <label>${item.q}</label>
      ${prefixHtml}
      <textarea id="inputField" placeholder="${hasSuggestion ? 'Start typing or use suggestions below...' : item.placeholder}"></textarea>
      <div class="char-count" id="charCount"></div>
      ${suggestionHtml}
    </div>`;
  const ta = document.getElementById("inputField");
  ta.value = answers[idx] || "";
  ta.maxLength = item.limit;
  ta.oninput = () => {
    answers[idx] = ta.value;
    updateCharCount(idx);
  };
  
  // Store current suggestion for this question
  window.currentSuggestion = item.placeholder;
  window.currentIdx = idx;
  
  updateCharCount(idx);
}

function useSuggestions() {
  const ta = document.getElementById("inputField");
  const link = document.getElementById("useSuggestions");
  
  if (link.classList.contains('used')) return;
  
  // If field is empty, insert suggestion. If not empty, append with separator.
  if (ta.value.trim() === '') {
    ta.value = window.currentSuggestion;
  } else {
    ta.value = ta.value.trim() + ' ' + window.currentSuggestion;
  }
  
  answers[window.currentIdx] = ta.value;
  updateCharCount(window.currentIdx);
  
  // Update link state
  link.textContent = '✓ Suggestions added';
  link.classList.add('used');
  
  // Focus the textarea so they can edit
  ta.focus();
}

function updateCharCount(idx){
  let sum = 0;
  const isSection1 = pageIndex <= 1 + s1len;
  const start = isSection1 ? 0 : s1len;
  const end = idx;
  const section = isSection1 ? section1 : section2;
  
  for(let i = start; i <= end; i++) {
    const sectionIndex = isSection1 ? i : i - s1len;
    const prefix = section[sectionIndex]?.prefix || "";
    const answer = answers[i] || "";
    sum += prefix.length + answer.length + 1;
  }
  
  const cc = document.getElementById("charCount");
  cc.innerText = `Section total: ${sum}/1500`;
  cc.style.color = sum > 1500 ? "#dc2626" : "#555";
  nextBtn.disabled = sum > 1500;
}

function saveAnswer(idx){
  const field = document.getElementById("inputField");
  if(field) answers[idx] = field.value;
}

function buildSectionText(startIdx, endIdx, section) {
  const parts = [];
  for(let i = startIdx; i < endIdx; i++) {
    const sectionIdx = i - startIdx;
    const prefix = section[sectionIdx]?.prefix || "";
    const answer = answers[i] || "";
    if (answer.trim()) {
      parts.push(prefix + answer);
    }
  }
  return parts.join(". ") + (parts.length > 0 ? "." : "");
}

function showInstructions(platform) {
  document.querySelectorAll('.platform-instructions').forEach(el => el.style.display = 'none');
  document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
  document.getElementById(platform + '-instructions').style.display = 'block';
  event.target.classList.add('active');
}

function renderSummaryHtml(){
  const sec1 = buildSectionText(0, s1len, section1);
  const sec2 = buildSectionText(s1len, s1len + s2len, section2);
  
  return `
    <div class="celebration">
      <h2>You Did It.</h2>
      <p>Your AI Coworker is ready to meet you.</p>
    </div>

    <p>Copy each section below and paste it into your AI's settings:</p>

    <div class="platform-tabs">
      <button onclick="showInstructions('chatgpt')" class="tab-btn active">ChatGPT</button>
      <button onclick="showInstructions('claude')" class="tab-btn">Claude</button>
      <button onclick="showInstructions('gemini')" class="tab-btn">Gemini</button>
    </div>

    <div id="chatgpt-instructions" class="platform-instructions">
      <p>ChatGPT Setup:</p>
      <ul>
        <li>Go to <strong>Settings → Personalization → Customization</strong></li>
        <li><strong>Section 1</strong> → Paste into "What traits should ChatGPT have?"</li>
        <li><strong>Section 2</strong> → Paste into "What should ChatGPT know about you?"</li>
      </ul>
    </div>

    <div id="claude-instructions" class="platform-instructions" style="display:none;">
      <p>Claude Setup:</p>
      <ul>
        <li>Go to <strong>Settings → Profile</strong></li>
        <li>Paste <strong>both sections</strong> into "What personal preferences should Claude consider?"</li>
      </ul>
    </div>

    <div id="gemini-instructions" class="platform-instructions" style="display:none;">
      <p>Gemini Setup:</p>
      <ul>
        <li>Go to <strong>Settings → Saved Info</strong></li>
        <li>Paste <strong>both sections</strong> (you may need to split into multiple entries)</li>
      </ul>
    </div>

    <div class="result-section-header">
      <div class="section-number">1</div>
      <h3>Your AI Coworker</h3>
    </div>
    <div class="summary" id="sum1">${sec1}</div>
    <button class="copy-btn" onclick="copyToClipboard('sum1')">Copy Section 1</button>

    <div class="result-section-header">
      <div class="section-number">2</div>
      <h3>About You</h3>
    </div>
    <div class="summary" id="sum2">${sec2}</div>
    <button class="copy-btn" onclick="copyToClipboard('sum2')">Copy Section 2</button>

    <div class="video-cta">
      <p>Want to get more out of your Blueprint?</p>
      <p>I'll walk you through the thinking behind every question—and show you how I configured my own AI.</p>
      <button onclick="window.open('https://nimbology.com/blueprint-walkthrough','_blank')">Get the Free Video Walkthrough →</button>
    </div>

    <div class="email-section">
      <label><input type="checkbox" id="emailOpt"> Email me a copy of my results</label>
      <div id="emailInput" style="display:none;">
        <input type="email" id="userEmail" placeholder="you@example.com"/>
        <button onclick="sendEmail()">Send</button>
        <button onclick="downloadResults()" class="download-btn">Download</button>
      </div>
    </div>`;
}

function attachEmailToggle(){
  const opt = document.getElementById("emailOpt"),
        inp = document.getElementById("emailInput");
  if(opt && inp) {
    opt.addEventListener('change', e => inp.style.display = e.target.checked ? 'flex' : 'none');
  }
}

function copyToClipboard(id) {
  const text = document.getElementById(id).innerText;
  navigator.clipboard.writeText(text);
  showToast('Copied! Ready to paste.');
}

function showToast(msg){
  const t = document.getElementById("toast");
  t.innerText = msg;
  t.style.display = "block";
  setTimeout(()=> t.style.display="none", 3000);
}

function sendEmail(){
  const userEmail = document.getElementById("userEmail").value.trim();
  if(!userEmail) return showToast("Please enter your email.");
  
  const sec1 = buildSectionText(0, s1len, section1);
  const sec2 = buildSectionText(s1len, s1len + s2len, section2);
  
  emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, {
    to_email: userEmail, section1: sec1, section2: sec2
  })
  .then(response => {
    console.log("SUCCESS:", response);
    showToast("✓ Email sent!");
  })
  .catch(err => {
    console.error("EMAIL ERROR:", err);
    showToast("Email failed. Try downloading instead.");
  });
}

function downloadResults() {
  const sec1 = buildSectionText(0, s1len, section1);
  const sec2 = buildSectionText(s1len, s1len + s2len, section2);
  const content = `AI COWORKER BLUEPRINT™ - YOUR RESULTS
Generated at nimbology.com

════════════════════════════════════════
SECTION 1: YOUR AI COWORKER
════════════════════════════════════════
Paste this into your AI's "traits" or "personality" settings.

${sec1}

════════════════════════════════════════
SECTION 2: ABOUT YOU
════════════════════════════════════════
Paste this into your AI's "about you" or "context" settings.

${sec2}

════════════════════════════════════════
SETUP INSTRUCTIONS
════════════════════════════════════════
ChatGPT: Settings → Personalization → Customization
Claude: Settings → Profile → Personal Preferences
Gemini: Settings → Saved Info

════════════════════════════════════════
Want the video walkthrough? 
nimbology.com/blueprint-walkthrough
════════════════════════════════════════
`;
  
  const blob = new Blob([content], { type: "text/plain" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "AI-Coworker-Blueprint-Results.txt";
  a.click();
  showToast("✓ Download started!");
}

renderPage();
</script>

<script>
function sendHeight() {
  const height = document.body.scrollHeight;
  parent.postMessage({ aiBlueprintHeight: height }, "*");
}
window.onload = sendHeight;
window.onresize = sendHeight;
document.addEventListener('input', sendHeight);
document.addEventListener('click', sendHeight);
</script>
</body>
</html>
