<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>AI Coworker Blueprint</title>
  <style>
    * { box-sizing:border-box; }
    body { margin:0; padding:0; background:transparent; font-family:sans-serif; }
    #app {
      max-width:600px;
      margin:2rem auto;
      background:#ebf5f6;
      border-radius:4px;
      overflow:hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    #header { background:#fff; padding:1rem; }
    #header img { vertical-align:middle; }
    #header h1 { display:inline-block; margin:0 0 0 1rem; color:#0e2029; font-size:1.75rem; vertical-align:middle; }
    .progress { height:8px; background:#eee; width:100%; }
    .progress-bar { height:8px; background:#3b82f6; width:0%; transition:width .3s; }
    #formContainer { padding:1.5rem; }
    .question { margin-bottom:2rem; }
    label { display:block; margin-bottom:.5rem; font-weight:600; }
    .prefix-display { background:#f0f0f0; padding:0.5rem; border-radius:4px; margin-bottom:0.5rem; font-style:italic; color:#333; }
    input[type=text], input[type=email], textarea {
      width:100%; padding:.5rem; font-size:1rem; border:1px solid #ccc; border-radius:4px;
    }
    textarea { resize:vertical; min-height:100px; }
    .char-count { font-size:.875rem; color:#555; margin-top:.25rem; }
    .controls { display:flex; justify-content:space-between; padding:1rem; background:#fff; }
    button {
      padding:.6rem 1.2rem; font-size:1rem; border:none; border-radius:4px; cursor:pointer;
      background:#db4227; color:#fff;
    }
    button[disabled] { background:#ccc; cursor:default; }
    .copy-btn { margin-right:.5rem; }
    .summary { background:#fafafa; padding:1rem; border:1px solid #ddd; border-radius:4px; white-space:pre-wrap; }
    #footer {
      background:#0e2029; color:#fff; text-align:center; padding:.5rem; font-size:.875rem;
    }
    #footer div:first-child { margin-bottom:.5rem; }
    #toast {
      position: fixed;
      top: 2rem;
      left: 50%;
      transform: translateX(-50%);
      background: #fff;
      color: #222;
      padding: .95rem 1.7rem;
      border-radius: 8px;
      display: none;
      font-size: 1.05rem;
      box-shadow: 0 2px 12px rgba(0,0,0,0.13);
      z-index: 9999;
      border: 2px solid #db4227;
    }

    .modal-backdrop {
      position:fixed; top:0; left:0; right:0; bottom:0;
      background:rgba(0,0,0,0.4); display:none; align-items:center; justify-content:center;
    }
    .modal { background:#fff; padding:1rem; max-width:400px; border-radius:4px; }
  </style>
</head>
<body>
  <div id="app">
    <div id="header">
      <img src="https://images.squarespace-cdn.com/content/672bffc68fd9b922d9f34a55/08a58d80-4436-4c37-a3b6-e3bb7e086c45/Strategic+Advisory+%282%29.png?content-type=image%2Fpng"
           width="200" alt="Nimbology logo"/>
      <h1>AI Coworker Blueprint™</h1>
    </div>
    <div class="progress"><div class="progress-bar" id="progressBar"></div></div>
    <div id="formContainer"></div>
    <div class="controls">
      <button id="prevBtn" disabled>Back</button>
      <button id="nextBtn">Next</button>
    </div>
    <div id="footer">
      <div style="font-size:0.875rem;">
*This form was custom-built with privacy in mind.<br>
        No results are stored, and no results are visible to third parties.<br>
        No results are seen or retained by anyone but you.<br><br>

This resource was built exclusively for Nimbology clients and workshop participants. If you think someone else should have access, connect them with us directly at <a href="mailto:lizbbaker@nimbology.com" style="color: #ffffff;">lizbbaker@nimbology.com</a>.
      </div>
    </div>
  </div>

  <div id="toast"></div>

  <div class="modal-backdrop" id="modalBackdrop">
    <div class="modal">
      <p id="modalContent"></p>
      <button onclick="closeModal()">Close</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

<script>
// ==== CONFIGURE EmailJS ====
const EMAILJS_USER_ID    = 'SFReYwwY4dQJsG2ap';
const EMAILJS_SERVICE_ID = 'service_gpqnffd';
const EMAILJS_TEMPLATE_ID= 'template_roe9gvx';
emailjs.init(EMAILJS_USER_ID);

// ==== INTRO & SECTION INTRO SCREENS ====
const intro = {
  title: "Welcome!",
  body: `<strong>You're just a few steps away from building your personal AI Coworker.</strong><br><br>
Define its persona and teach it about you. At the end, you'll get your personalized setup ready to copy straight into ChatGPT, Claude, or Gemini.<br><br>
When you're ready, click Start.`
};
const section1Intro = {
  title: "Section 1: Define Your AI Coworker",
  body: `We'll answer the question: <strong>What traits should your AI Coworker have?</strong><br><br>
You have up to 1,500 characters to paint the picture.<br><br>Think personality, tone, strengths, and any "no-go" behaviors.<br><br>When you're ready, click Next and bring your ideal AI Coworker to life.`
};
const section2Intro = {
  title: "Section 2: Teach Your AI Coworker About You",
  body: `Share the essentials: your role, values, goals, and what makes you tick. I've shared personal examples to give you an idea of how I set up my AI Coworker. Be bold. Be aspirational. And remember, you can always update and tweak the information at any time.<br><br>Take up to 1,500 characters to paint a clear portrait of yourself so your AI Coworker can support you perfectly.`
};

// ==== QUESTIONS ====
const section1 = [
  { q:"What would you like your AI Coworker's name to be?", prefix:"Your name is ", placeholder:"[enter name]", limit:30 },
  { q:"What traits should your ideal AI Coworker have?", prefix:"You are: ", placeholder:"Consultative w/exec presence. Direct—no BS. Clear, concise, practical. High EQ. Sharp, fun, creative. Challenge me.", limit:500 },
   { q:"What should your ideal AI Coworker <i>not</i> do?", prefix:"", placeholder:"Don't compliment me unless I deserve it. Don't be a yes man/woman. Never use em dashes or emojis.", limit:500 },
  { q:"What are your role-related goals?", prefix:"Help me reach these work goals: ", placeholder:"Lead with excellence. Delegate well. Grow revenue, impact, and visibility. Protect focus and energy. Keep teams moving.", limit:500 },
  { q:"What are your aspirational goals?", prefix:"Help me reach my aspirational goals: ", placeholder:"Financial independence. Publish my book. Buy investment properties. Start a company.", limit:500 },
  { q:"Are you ok with your AI Coworker sharing its opinions with you?", prefix:"", placeholder:"Share your opinions and challenge me.", limit:300 },
  { q:"What do you care about that your AI Coworker should care about?", prefix:"Things I care about that you should care about: ", placeholder:"Ethics. Excellence. Authenticity. Impact. Freedom. Resourcefulness. Optimization. Stewardship.", limit:300 },
  { q:"What do you want your AI Coworker to teach you with every interaction?", prefix:"With every interaction, teach me: ", placeholder:"Executive mindset. Pricing and value creation. Leadership. Persuasive communication. Strategic focus.", limit:500 },
  { q:"How do you want your AI Coworker to prepare you?", prefix:"Prepare me for: ", placeholder:"Risks, politics, detractors, blind spots. Success, retirement, my next role.", limit:300 },
  { q:"What encouragement or support do you need?", prefix:"Remind me: ", placeholder:"To build a legacy. Celebrate wins. Ground me in facts. Reduce stress by boosting confidence and clarity.", limit:400 },
  { q:"What challenges do you need to be reminded to overcome?", prefix:"Help me overcome: ", placeholder:"Procrastination. Perfectionism. People-pleasing. Time leakage on low-value work.", limit:500 },
  { q:"What is the desired quality and style of your work?", prefix:"Our work style: ", placeholder:"World-class, original, useful, cool, unique, effective.", limit:300 },
  { q:"Big picture, what do you want your AI Coworker to help you do and achieve?", prefix:"Overall, help me: ", placeholder:"Create impact. Build financial freedom. Make the journey fun.", limit:500 }
];

const section2 = [
  { q:"What are the top roles that describe what you're doing and who you are?", prefix:"My current top roles are: ", placeholder:"Founder. Speaker. PM. Sales Manager. Administrator. Board Member. Clerk.", limit:500 },
  { q:"What are the important traits that describe who you are and how you operate?", prefix:"I am: ", placeholder:"Creative, visionary, adaptive, bold, pragmatic, empathetic, connector, extroverted", limit:500 },
  { q:"What are your big ambitions?", prefix:"My big ambitions: ", placeholder:"Build a national practice, achieve financial freedom. Be a trusted advisor to governments, companies, and organizations.", limit:500 },
  { q:"What education experience or degrees would you like to share?", prefix:"Education: ", placeholder:"Degrees, Certifications, Learning Style", limit:300 },
  { q:"Sum up your work experience and what you've done.", prefix:"Experience: ", placeholder:"20+ years consulting, leadership, ops, comms, product development, sales, retail, coach, entrepreneur.", limit:700 },
  { q:"List your current or recent projects.", prefix:"Current/recent projects: ", placeholder:"", limit:700 },
  { q:"List any experiences or accomplishments of note.", prefix:"Accomplishments/awards: ", placeholder:"Awards, Publications, Achievements", limit:700 },
  { q:"What are you naturally passionate about? What drives you?", prefix:"My drivers: ", placeholder:"Transformation, human potential, design, strategy, coaching, sales, PM, leadership.", limit:500 },
  { q:"What world views, moral codes, or ideals appeal to you?", prefix:"My codes: ", placeholder:"Stoicism. Classical liberal. Integrity. Responsibility. Community-minded individuality.", limit:500 },
  { q:"What's your preferred style of interacting with people?", prefix:"My preferred style of communication: ", placeholder:"Motivational, direct, generous, action-oriented, fun.", limit:300 },
  { q:"How do people describe you?", prefix:"How do people describe you: ", placeholder:"Dynamic. Strong. Steady. Connector. Catalyst. Visionary. Stoic. Leader. Creative. Calm. Resourceful.", limit:300 },
  { q:"What is your personality type?", prefix:"My personality: ", placeholder:"Myers-Briggs, DISC, Enneagram", limit:300 },
  { q:"What challenges would you like AI to help you be aware of and change?", prefix:"Help me overcome: ", placeholder:"Doing too much myself, sweating small stuff, procrastinating.", limit:700 }
];

// ==== PAGINATION SETUP ====
const s1len = section1.length, s2len = section2.length;
const totalPages = s1len + s2len + 5;
let pageIndex = 0;
const answers = Array(s1len + s2len).fill("");

const formContainer = document.getElementById("formContainer");
const progressBar   = document.getElementById("progressBar");
const prevBtn       = document.getElementById("prevBtn");
const nextBtn       = document.getElementById("nextBtn");

prevBtn.onclick = () => { if(pageIndex>0){ pageIndex--; renderPage(); } };
nextBtn.onclick = () => {
  if(pageIndex>=2 && pageIndex<=1+s1len) saveAnswer(pageIndex-2);
  if(pageIndex>=3+s1len && pageIndex<=2+s1len+s2len) saveAnswer(s1len + (pageIndex-3-s1len));
  pageIndex++;
  renderPage();
};

function renderHeader(){
  document.getElementById("header").innerHTML = `
    <img src="https://images.squarespace-cdn.com/content/672bffc68fd9b922d9f34a55/08a58d80-4436-4c37-a3b6-e3bb7e086c45/Strategic+Advisory+%282%29.png?content-type=image%2Fpng"
         width="200" alt="logo"/>
    <h1>AI Coworker Blueprint™</h1>`;
}

function renderPage(){
  renderHeader();
  formContainer.innerHTML = "";
  progressBar.style.width = `${pageIndex/(totalPages-1)*100}%`;

  prevBtn.disabled = pageIndex===0;
  nextBtn.style.display = "inline-block";

  if(pageIndex===0){
    nextBtn.innerText = "Start";
    formContainer.innerHTML = `<div class="question"><h2>${intro.title}</h2><p>${intro.body}</p></div>`;
  }
  else if(pageIndex===1){
    nextBtn.innerText = "Next";
    formContainer.innerHTML = `<div class="question"><h2>${section1Intro.title}</h2><p>${section1Intro.body}</p></div>`;
  }
  else if(pageIndex>=2 && pageIndex<=1+s1len){
    nextBtn.innerText = "Next";
    renderQuestion(section1[pageIndex-2], pageIndex-2);
  }
  else if(pageIndex===2+s1len){
    nextBtn.innerText = "Next";
    formContainer.innerHTML = `<div class="question"><h2>${section2Intro.title}</h2><p>${section2Intro.body}</p></div>`;
  }
  else if(pageIndex>=3+s1len && pageIndex<=2+s1len+s2len){
    nextBtn.innerText = "Next";
    renderQuestion(section2[pageIndex-3-s1len], s1len + (pageIndex-3-s1len));
  }
  else if(pageIndex===3+s1len+s2len){
    nextBtn.style.display = "none";
    formContainer.innerHTML = renderSummaryHtml();
    attachEmailToggle();
  }
  else if(pageIndex===4+s1len+s2len){
    nextBtn.style.display = "none";
    formContainer.innerHTML = `
      <h2>Congratulations!</h2>
      <p>Your AI Coworker is onboarded and ready to go.<br>
      Start working together, and if you run into any questions,<br>
      reach out at <a href="https://nimbology.com/contact" target="_blank">nimbology.com/contact</a>.</p>`;
  }
}

function renderQuestion(item, idx){
  const prefixHtml = item.prefix ? `<div class="prefix-display">${item.prefix}</div>` : '';
  formContainer.innerHTML = `
    <div class="question">
      <label>${item.q}</label>
      ${prefixHtml}
      <textarea id="inputField" placeholder="${item.placeholder}"></textarea>
      <div class="char-count" id="charCount"></div>
    </div>`;
  const ta = document.getElementById("inputField");
  ta.value = answers[idx] || "";
  ta.maxLength = item.limit;
  ta.oninput = () => {
    answers[idx] = ta.value;
    updateCharCount(idx);
  };
  updateCharCount(idx);
}

function updateCharCount(idx){
  let sum = 0;
  const isSection1 = pageIndex <= 1 + s1len;
  const start = isSection1 ? 0 : s1len;
  const end = idx;
  const section = isSection1 ? section1 : section2;
  
  for(let i = start; i <= end; i++) {
    const sectionIndex = isSection1 ? i : i - s1len;
    const prefix = section[sectionIndex]?.prefix || "";
    const answer = answers[i] || "";
    sum += prefix.length + answer.length + 1;
  }
  
  const cc = document.getElementById("charCount");
  cc.innerText = `Section total: ${sum}/1500`;
  cc.style.color = sum > 1500 ? "red" : "#555";
  nextBtn.disabled = sum > 1500;
}

function saveAnswer(idx){
  answers[idx] = document.getElementById("inputField").value;
}

function buildSectionText(startIdx, endIdx, section) {
  const parts = [];
  for(let i = startIdx; i < endIdx; i++) {
    const sectionIdx = i - startIdx;
    const prefix = section[sectionIdx]?.prefix || "";
    const answer = answers[i] || "";
    if (answer.trim()) {
      parts.push(prefix + answer);
    }
  }
  return parts.join(". ") + (parts.length > 0 ? "." : "");
}

function renderSummaryHtml(){
  const sec1 = buildSectionText(0, s1len, section1);
  const sec2 = buildSectionText(s1len, s1len + s2len, section2);
  
  return `
    <h2>Congratulations!</h2>
<p><strong>You've just provided everything your AI Coworker needs to start becoming a truly valuable partner in your work and life.</strong></p><p>Start working with your AI Coworker today, and if you have questions or want to unlock even more AI superpowers, reach out anytime:
<a href="https://nimbology.com/contact">nimbology.com/contact</a>.</p>
    <h3>About Your AI Coworker: Results</h3>
    <p><ul><li><i>Copy/paste this into ChatGPT's settings under Customization/Personalization to answer the question: <strong>What traits should ChatGPT have?</strong></i></li>
<li>In Gemini, add it in Settings under Saved Info. You may need to break it up into multiple sections.</li>
<li>In Claude, add it in Settings under <strong>What personal preferences should Claude consider in responses?</strong></li></ul></i></p> 
    <div class="summary" id="sum1">${sec1}</div>
    <button class="copy-btn" onclick="copyToClipboard('sum1',1)">Copy AI Coworker Details Now</button>
    <h3>About You: Results</h3>
<p><i><ul><li>Copy/paste this into ChatGPT under Customization/Personalization to answer the question: <strong>Anything else ChatGPT should know about you?</strong></i></li>
<li>In Gemini, add it in Settings under Saved Info. You may need to break it up into multiple sections.</li>
<li>In Claude, add it in Settings under <strong>What personal preferences should Claude consider in responses?</strong></li></ul></i></p>
    <div class="summary" id="sum2">${sec2}</div>
    <button class="copy-btn" onclick="copyToClipboard('sum2',2)">Copy About Me Details Now</button>
    <div style="margin-top:1.5rem;">
      <label><input type="checkbox" id="emailOpt"> Send results to my email*</label>
      <div id="emailInput" style="display:none; margin-top:.5rem;">
        <input type="email" id="userEmail" placeholder="you@example.com"/>
        <button onclick="sendEmail()">Email My Results</button>
      </div>
    </div>`;
}

function attachEmailToggle(){
  const opt = document.getElementById("emailOpt"),
        inp = document.getElementById("emailInput");
  opt.addEventListener('change', e => inp.style.display = e.target.checked?'block':'none');
}

function copyToClipboard(id, section) {
  const text = document.getElementById(id).innerText;
  navigator.clipboard.writeText(text);
  const msg = section===1
    ? 'Copied and ready to paste!'
    : 'Copied and ready to paste!';
  showToast(msg);
}

function showToast(msg){
  const t = document.getElementById("toast");
  t.innerText = msg;
  t.style.display = "block";
  setTimeout(()=> t.style.display="none", 3000);
}

function showModal(sec){
  const content = sec===1
    ? 'Section 1: Paste!'
    : 'Section 2: Paste!';
  document.getElementById("modalContent").innerText = content;
  document.getElementById("modalBackdrop").style.display = "flex";
}
function closeModal(){
  document.getElementById("modalBackdrop").style.display = "none";
}

function sendEmail(){
  const userEmail = document.getElementById("userEmail").value.trim();
  if(!userEmail) return showToast("Please enter your email.");
  
  const sec1 = buildSectionText(0, s1len, section1);
  const sec2 = buildSectionText(s1len, s1len + s2len, section2);
  
  emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, {
    to_email: userEmail, section1: sec1, section2: sec2
  })
  .then(_ => showToast("✅ Email sent!"))
  .catch(err => showToast("❌ Email failed: " + (err.text||JSON.stringify(err))));
}

renderPage();
</script>

  <script>
function sendHeight() {
  const height = document.body.scrollHeight;
  parent.postMessage({ aiBlueprintHeight: height }, "*");
}
window.onload = sendHeight;
window.onresize = sendHeight;
document.addEventListener('input', sendHeight);
document.addEventListener('click', sendHeight);
</script>
</body>
</html>
